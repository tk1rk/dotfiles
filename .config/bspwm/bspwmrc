#!/usr/bin/env sh

# ##############################################################################
# #                                  ENV VARS                                  # 
# ##############################################################################

## Environments
export PATH="${PATH}:${HOME}/.config/bspwm/bin"

## Java Applications
wmname LG3D
export _JAVA_AWT_WM_NONREPARENTING=1

export WALLPAPER="$HOME/.config/bspwm/assets/bloodfountain.jpg"
export LOCKSCREEN_WALLPAPER="$HOME/.config/bspwm/assets/bloodfountain.jpg"

# Parse colors from "~/.Xresources"
xrdb -override "${HOME}/.Xresources"


# ##############################################################################
# #                                  FUNCTIONS                                 # 
# ##############################################################################
rule() { bspc rule -a "$@" & }
config() { bspc config "$@" & }
start() { pkill -x "$1"; { sleep 0.1; "$@" & }; }


# ##############################################################################
# #                                 WINDOW RULES                               #
# ##############################################################################
bspc monitor -d 1 2 3 4 


# ##############################################################################
# #                            GENERAL CONFIGURATION                           #
# ##############################################################################
config pointer_modifier             Mod4

config window_gap                   10

config top_padding                  0
config left_padding                 48
config right_padding                0
config bottom_padding               0

config split_ratio                  0.52
config borderless_monocle           true
config gapless_monocle              true
config focus_follows_pointer        true



# ##############################################################################
# #                                 MISCELLANEOUS                              #
# ##############################################################################
# Fix windows being below bar
xdo lower -N eww-bar

###External rules
# Pseudo automatic mode: always splits focused window when opening new window
bspc config external_rules_command ~/.config/bspwm/scripts/pseudo_automatic_mode

# Adjust new window: splits biggest windows to keep windows about the same size
bspc config external_rules_command ~/.config/bspwm/scripts/adjust-new-window
