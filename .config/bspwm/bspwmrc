#!/usr/bin/env sh

# ##############################################################################
# #                                  ENV VARS                                  # 
# ##############################################################################

## Bspwm config directory
export BSPDIR=$HOME/.config/bspwm

## Export bspwm/bin dir to PATH
export PATH=$HOME/.config/bspwm/bin:$PATH

## Java Applications
wmname LG3D
export _JAVA_AWT_WM_NONREPARENTING=1

export XDG_SESSION_TYPE="x11"
export XDG_CURRENT_DESKTOP="bspwm"

# wallpapers
export WALLPAPER=$HOME/.config/bspwm/wallpapers/nord_blood.jpg
export LOCKSCREEN_WALLPAPER=$HOME/.config/bspwm/wallpapers/nord_blood.jpg

# Parse colors from "${HOME}/.Xresources"
xrdb -override "$HOME/.Xresources"

# autostart
"$HOME/.config/bspwm/bin/autostart.sh" &

#  WINDOW RULES                               
bspc monitor -d 1 2 3 4 


# ##############################################################################
# #                            GENERAL CONFIGURATION                           #
# ##############################################################################
config pointer_modifier          Mod4
config pointer_action1           move
config pointer_action2           resize_side
config pointer_action3           resize_corner

config top_padding               0
config left_padding              35
config right_padding             0
config bottom_padding            0

# Apply bspwm configurations
config border_width              "$CURRENT_BORDER"
config window_gap                "$CURRENT_GAP"
config split_ratio               0.52

config focused_border_color      "$BLUE" 
config normal_border_color       "$BACKGROUND"
config active_border_color       "$MAGENTA"
config presel_feedback_color     "$GREEN"

config borderless_monocle        true
config gapless_monocle           false
config paddingless_monocle       true
config single_monocle            true
config focus_follows_pointer     true
config center_pseudo_tiled       true

# Manage all the unmanaged windows remaining from a previous session.
bspc wm --adopt-orphans




###External rules
# Pseudo automatic mode: always splits focused ~window when opening new windowp
bspc config external_rules_command ~/.config/bspwm/scripts/pseudo_automatic_mode

# Adjust new window: splits biggest windows to keep windows about the same size
bspc config external_rules_command Â¹q~/.config/bspwm/scripts/adjust-new-window
